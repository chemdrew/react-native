'use strict';var flattenStyle=require('../flattenStyle');var StyleSheet=require('../StyleSheet');function getFixture(){return StyleSheet.create({elementA:{styleA:'moduleA/elementA/styleA',styleB:'moduleA/elementA/styleB'},elementB:{styleB:'moduleA/elementB/styleB'}});}describe('flattenStyle',function(){it('should merge style objects',function(){var style1={width:10};var style2={height:20};var flatStyle=flattenStyle([style1,style2]);expect(flatStyle.width).toBe(10);expect(flatStyle.height).toBe(20);});it('should override style properties',function(){var style1={backgroundColor:'#000',width:10};var style2={backgroundColor:'#023c69',width:null};var flatStyle=flattenStyle([style1,style2]);expect(flatStyle.backgroundColor).toBe('#023c69');expect(flatStyle.width).toBe(null);});it('should overwrite properties with `undefined`',function(){var style1={backgroundColor:'#000'};var style2={backgroundColor:undefined};var flatStyle=flattenStyle([style1,style2]);expect(flatStyle.backgroundColor).toBe(undefined);});it('should not fail on falsy values',function(){expect(function(){return flattenStyle([null,false,undefined]);}).not.toThrow();});it('should recursively flatten arrays',function(){var style1={width:10};var style2={height:20};var style3={width:30};var flatStyle=flattenStyle([null,[],[style1,style2],style3]);expect(flatStyle.width).toBe(30);expect(flatStyle.height).toBe(20);});it('should not allocate an object when there is no style',function(){var nullStyle=flattenStyle(null);var nullStyleAgain=flattenStyle(null);expect(nullStyle).toBe(nullStyleAgain);expect(nullStyle).toBe(undefined);});it('should not allocate an object when there is a style',function(){var style={a:'b'};var nullStyle=flattenStyle(style);expect(nullStyle).toBe(style);});it('should not allocate an object when there is a single class',function(){var fixture=getFixture();var singleStyle=flattenStyle(fixture.elementA);var singleStyleAgain=flattenStyle(fixture.elementA);expect(singleStyle).toBe(singleStyleAgain);expect(singleStyle).toEqual({styleA:'moduleA/elementA/styleA',styleB:'moduleA/elementA/styleB'});});it('should merge single class and style properly',function(){var fixture=getFixture();var style={styleA:'overrideA',styleC:'overrideC'};var arrayStyle=flattenStyle([fixture.elementA,style]);expect(arrayStyle).toEqual({styleA:'overrideA',styleB:'moduleA/elementA/styleB',styleC:'overrideC'});});it('should merge multiple classes',function(){var fixture=getFixture();var AthenB=flattenStyle([fixture.elementA,fixture.elementB]);var BthenA=flattenStyle([fixture.elementB,fixture.elementA]);expect(AthenB).toEqual({styleA:'moduleA/elementA/styleA',styleB:'moduleA/elementB/styleB'});expect(BthenA).toEqual({styleA:'moduleA/elementA/styleA',styleB:'moduleA/elementA/styleB'});});it('should merge multiple classes with style',function(){var fixture=getFixture();var style={styleA:'overrideA'};var AthenB=flattenStyle([fixture.elementA,fixture.elementB,style]);var BthenA=flattenStyle([fixture.elementB,fixture.elementA,style]);expect(AthenB).toEqual({styleA:'overrideA',styleB:'moduleA/elementB/styleB'});expect(BthenA).toEqual({styleA:'overrideA',styleB:'moduleA/elementA/styleB'});});it('should flatten recursively',function(){var fixture=getFixture();var style=[{styleA:'newA',styleB:'newB'},{styleA:'newA2'}];var AthenB=flattenStyle([fixture.elementA,fixture.elementB,style]);expect(AthenB).toEqual({styleA:'newA2',styleB:'newB'});});it('should ignore invalid class names',function(){var invalid=flattenStyle(1234,null);expect(invalid).toEqual(undefined);});});